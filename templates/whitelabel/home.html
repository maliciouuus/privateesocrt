{% extends 'dashboard/base_dashboard.html' %}
{% load static %}

{% block title %}White Label - EscortDollars{% endblock %}

{% block extra_css %}
{{ block.super }}
<style>
    .feature-icon {
        width: 60px;
        height: 60px;
        border-radius: 15px;
        background: linear-gradient(to right, var(--primary-color), var(--primary-dark));
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 24px;
        margin-bottom: 1.5rem;
        box-shadow: 0 10px 20px rgba(var(--primary-rgb), 0.2);
    }
    
    .feature-card {
        height: 100%;
        transition: all 0.3s ease;
        border: none;
    }
    
    .feature-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
    }
    
    .stats-pill {
        background: rgba(var(--primary-rgb), 0.1);
        color: var(--primary-color);
        font-weight: 600;
        padding: 0.25rem 1rem;
        border-radius: 50px;
        margin-right: 1rem;
    }
    
    .site-card {
        border: none;
        transition: all 0.3s ease;
    }
    
    .site-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }
    
    .site-card .site-status {
        position: absolute;
        top: 15px;
        right: 15px;
        z-index: 1;
    }
    
    .site-preview {
        position: relative;
        height: 160px;
        overflow: hidden;
        border-radius: 10px 10px 0 0;
        background-color: #f8f9fa;
    }
    
    .site-preview img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    
    .plan-badge {
        position: absolute;
        bottom: 10px;
        left: 10px;
        padding: 0.25rem 0.75rem;
        border-radius: 50px;
        font-size: 0.75rem;
        font-weight: 600;
    }
    
    .plan-free {
        background-color: rgba(108, 117, 125, 0.9);
        color: white;
    }
    
    .plan-basic {
        background-color: rgba(13, 110, 253, 0.9);
        color: white;
    }
    
    .plan-pro {
        background-color: rgba(111, 66, 193, 0.9);
        color: white;
    }
    
    .plan-enterprise {
        background-color: rgba(220, 53, 69, 0.9);
        color: white;
    }
    
    .empty-state {
        text-align: center;
        padding: 3rem;
    }
    
    .empty-state i {
        font-size: 4rem;
        color: var(--primary-color);
        opacity: 0.2;
        margin-bottom: 1.5rem;
    }
    
    .pricing-table {
        display: flex;
        flex-wrap: wrap;
        gap: 1.5rem;
        margin-top: 1rem;
    }
    
    .pricing-card {
        flex: 1;
        min-width: 250px;
        border-radius: 15px;
        padding: 1.5rem;
        display: flex;
        flex-direction: column;
        transition: all 0.3s ease;
        border: 1px solid rgba(0,0,0,0.1);
    }
    
    .pricing-card.featured {
        border: none;
        background: linear-gradient(45deg, var(--primary-color), var(--primary-dark));
        color: white;
        transform: scale(1.05);
        position: relative;
        box-shadow: 0 20px 30px rgba(var(--primary-rgb), 0.3);
    }
    
    .pricing-card.featured .pricing-header h3,
    .pricing-card.featured .pricing-price {
        color: white;
    }
    
    .pricing-header {
        margin-bottom: 1.5rem;
    }
    
    .pricing-header h3 {
        margin-bottom: 0.5rem;
        color: var(--primary-color);
    }
    
    .pricing-price {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        color: var(--primary-color);
    }
    
    .pricing-period {
        font-size: 0.875rem;
        opacity: 0.7;
    }
    
    .pricing-features {
        margin: 1.5rem 0;
        flex-grow: 1;
    }
    
    .pricing-feature {
        display: flex;
        align-items: center;
        margin-bottom: 0.75rem;
    }
    
    .pricing-feature i {
        margin-right: 0.5rem;
    }
    
    .pricing-feature-included {
        opacity: 1;
    }
    
    .pricing-feature-excluded {
        opacity: 0.5;
        text-decoration: line-through;
    }
    
    .pricing-card.featured .btn-primary {
        background-color: white;
        color: var(--primary-color);
        border: none;
    }
    
    /* Improved create site button */
    .btn-create-site {
        padding: 0.6rem 1.2rem;
        font-weight: 600;
        letter-spacing: 0.5px;
        background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
        border: none;
        box-shadow: 0 4px 15px rgba(var(--primary-rgb), 0.3);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        z-index: 1;
        border-radius: 8px;
    }
    
    .btn-create-site:before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, rgba(255,255,255,0.2), rgba(255,255,255,0));
        transform: skewX(-25deg);
        transition: all 0.5s;
        z-index: -1;
    }
    
    .btn-create-site:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(var(--primary-rgb), 0.4);
    }
    
    .btn-create-site:hover:before {
        left: 100%;
    }
    
    .btn-create-site i {
        margin-right: 8px;
        transition: transform 0.3s ease;
    }
    
    .btn-create-site:hover i {
        transform: rotate(90deg);
    }
</style>
{% endblock %}

{% block dashboard_content %}
<div class="page-header d-flex justify-content-between align-items-center">
    <div>
        <h2 class="fw-bold mb-0">White Label</h2>
        <p class="text-muted">Create and manage your custom websites</p>
    </div>
    <div>
        <a href="{% url 'whitelabel:create_site' %}" class="btn btn-primary btn-create-site">
            <i class="fas fa-plus me-2"></i> Create Site
        </a>
    </div>
</div>

<!-- Statistics -->
<div class="row mb-4">
    <div class="col-12">
        <div class="stats-card d-flex align-items-center">
            <div class="me-auto">
                <h4 class="mb-0">White Label Sites Summary</h4>
                <p class="text-muted mb-0">Overview of your activity</p>
            </div>
            <div class="d-flex align-items-center">
                <div class="stats-pill">
                    <i class="fas fa-globe me-2"></i> Active Sites: <span id="activeCount">{{ active_sites_count|default:"0" }}</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Recent Sites -->
<div class="stats-card mb-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="fw-bold">Your Recent Sites</h4>
    </div>
    
    <div class="row g-4">
        {% if sites %}
            {% for site in sites %}
            <div class="col-md-6 col-lg-4">
                <div class="site-card card h-100 rounded-4 overflow-hidden">
                    <div class="site-status">
                        {% if site.status == 'active' %}
                            <span class="badge bg-success">Active</span>
                        {% elif site.status == 'pending' %}
                            <span class="badge bg-warning">Pending</span>
                        {% elif site.status == 'draft' %}
                            <span class="badge bg-secondary">Draft</span>
                        {% elif site.status == 'suspended' %}
                            <span class="badge bg-danger">Suspended</span>
                        {% endif %}
                    </div>
                    <div class="site-preview">
                        <img src="{% if site.logo and site.logo.name %}{{ site.logo.url }}{% else %}https://via.placeholder.com/400x200?text=Site+Preview{% endif %}" alt="{{ site.name }}">
                        <div class="plan-badge plan-{{ site.plan }}">{{ site.get_plan_display }}</div>
                    </div>
                    <div class="card-body">
                        <h5 class="card-title mb-2 text-white">{{ site.name }}</h5>
                        <p class="card-text text-muted small mb-3">
                            {% if site.custom_domain %}
                                {{ site.custom_domain }}
                            {% else %}
                                {{ site.subdomain }}.escortdollars.com
                            {% endif %}
                        </p>
                        <div class="d-flex align-items-center justify-content-between">
                            <div>
                            </div>
                            <a href="{% url 'whitelabel:site_detail' site.id %}" class="btn btn-sm btn-outline-primary">Manage</a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div class="col-12">
                <div class="empty-state">
                    <i class="fas fa-globe"></i>
                    <h4>You don't have any white label sites yet</h4>
                    <p class="text-muted mb-4">Start creating your custom site now to generate more revenue.</p>
                    <a href="{% url 'whitelabel:create_site' %}" class="btn btn-primary btn-create-site">
                        <i class="fas fa-plus me-2"></i> Create My First Site
                    </a>
                </div>
            </div>
        {% endif %}
    </div>
</div>

<!-- Features -->
<div class="stats-card mb-4">
    <h4 class="mb-4 fw-bold">White Label Features</h4>
    
    <div class="row g-4">
        <div class="col-md-6 col-lg-3">
            <div class="card feature-card">
                <div class="card-body">
                    <div class="feature-icon">
                        <i class="fas fa-paint-brush"></i>
                    </div>
                    <h5 class="card-title text-white">Complete Customization</h5>
                    <p class="card-text text-white">Modify colors, logos, and content to create a unique site that reflects your brand.</p>
                </div>
            </div>
        </div>
        
        <div class="col-md-6 col-lg-3">
            <div class="card feature-card">
                <div class="card-body">
                    <div class="feature-icon">
                        <i class="fas fa-link"></i>
                    </div>
                    <h5 class="card-title text-white">Custom Domain</h5>
                    <p class="card-text text-white">Use your own domain name for a completely professional and independent website.</p>
                </div>
            </div>
        </div>
        
        <div class="col-md-6 col-lg-3">
            <div class="card feature-card">
                <div class="card-body">
                    <div class="feature-icon">
                        <i class="fas fa-chart-pie"></i>
                    </div>
                    <h5 class="card-title text-white">Advanced Analytics</h5>
                    <p class="card-text text-white">Track your site's performance with detailed analytics and reports.</p>
                </div>
            </div>
        </div>
        
        <div class="col-md-6 col-lg-3">
            <div class="card feature-card">
                <div class="card-body">
                    <div class="feature-icon">
                        <i class="fas fa-euro-sign"></i>
                    </div>
                    <h5 class="card-title text-white">Amplified Revenue</h5>
                    <p class="card-text text-white">Increase your conversion rate and maximize your affiliate earnings.</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
{{ block.super }}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Counter animation
        function animateCounter(id, target) {
            let current = 0;
            const element = document.getElementById(id);
            const duration = 1500;
            const interval = 30;
            const steps = Math.floor(duration / interval);
            const step = target / steps;
            
            const timer = setInterval(() => {
                current += step;
                if (current >= target) {
                    element.textContent = target;
                    clearInterval(timer);
                } else {
                    element.textContent = Math.floor(current);
                }
            }, interval);
        }
        
        // Initialize animations after page load
        setTimeout(() => {
            animateCounter('activeCount', {{ active_sites_count|default:"0" }});
        }, 500);
        
        // Hover effects for cards
        const featureCards = document.querySelectorAll('.feature-card');
        featureCards.forEach(card => {
            card.addEventListener('mouseenter', () => {
                card.classList.add('shadow-lg');
            });
            card.addEventListener('mouseleave', () => {
                card.classList.remove('shadow-lg');
            });
        });
    });
</script>
{% endblock %} 